{% extends "dashboard/base.html" %}
{% load url from future %}
{% block page_title %}{{ page_title }}{% endblock %}

{% block site_brand %}{{ globals.site_brand }}{% endblock %}

{% block content %}   
	<div class="panel panel-primary">
	  <div class="panel-heading">
	    <h3 class="panel-title">{% if account.name %}{{ account.name }}{% else %}{{ account.alternative_name }}{% endif %}</h3>
	  </div>
	  <div class="panel-body">
	  
	  
	<div class="row">
	  <div class="col-md-6">
	  <h4>Details</h4>
	  <table class="table">
	  
	  <tr>
	  	<td class="no-top-solid-border" width="10%">Currency</td>
	  	<td class="no-top-solid-border text-right" width="40%">{{ currency_name }} ({{ currency_symbol }})</td>
	  </tr>
	  
	  <tr>
	  	<td class="no-top-solid-border" width="10%">Addresses</td>
	  	<td class="no-top-solid-border" width="40%">
	  	{% for address in account.addresses %}
	  	<div style="padding: 4px;" class="row text-right"><span class="address-label label-default">{{ account.currency_symbol }} {{ address }}</span></div>
	  	{% endfor %}
	  	</td>
	  </tr>
		<tr>
			<td width="10%">Last activity</td>
		 	<td width="40%" class="text-right fixed-font-width">{{ transactions.0.time_pretty }}</td>
		</tr>
	  </table>
	  </div>
		<div class="col-md-6">
		<table class="table">
		<tr>
			<td class="no-top-solid-border" width="10%"><h4>Balance</h4></td>
		 	<td class="no-top-solid-border text-right fixed-font-width" width="40%"><h3>{{ account.balance }} {{ account.currency|upper }}</h3></td>
		</tr>
		</table>
  	  </div>
	</div>
	
	<h4>Transactions</h4>
     <table class="smaller-font-size table table-hover table-striped table-condensed">
      <thead>
        <tr class="top-solid-border">
            <th class="hidden-xs" style="background-color:#f5f5f5;" >To</th>
            <th class="hidden-xs" width="200" style="background-color:#f5f5f5;">From</th>
            <th width="200" style="background-color:#f5f5f5;">Comment</th>
            <th class="text-center" width="30" style="background-color:#f5f5f5;">Type</th>
            <th class="hidden-xs text-center" style="background-color:#f5f5f5;">Conf.</th>
            <th width="100" style="background-color:#f5f5f5;">When</th>
            <th width="150"style="background-color:#f5f5f5;" class="text-right">Amount</th>
        </tr>
       </thead>
        {% if transactions %}
        {% for transaction in transactions %} 
        {% if transaction.confirmations > 6 or transaction.category == "move" %}
          <tr>
        {% else %}
          <tr style="color: #bbb;">
        {% endif %}
        
            {% if transaction.category = 'move' %}
            <td class="hidden-xs"><span style="color:#ccc;">this account</span></td>
            {% else %}
            <td class="hidden-xs" nowrap><span class="address-label label-default">{{ transaction.currency_symbol }} {{ transaction.address }}</span></td>
            {% endif %}

            {% if transaction.category = 'receive' %}
            <td class="hidden-xs" nowrap><span class="sender-address address-label label-default">{{ transaction.currency_symbol }} {{ transaction.details.sender_address }} <span class="normal-font glyphicon glyphicon-info-sign" title="" data-toggle="tooltip" data-original-title="This address has been calculated using the Input Script Signature. You should verify before using it."></span></span></td>
            {% elif transaction.category = 'send' %}
            <td class="hidden-xs fixed-width-font"><span style="color:#ccc;">this account</span></td>
            {% elif transaction.category = 'move' %}
            <td class="hidden-xs" nowrap><a href="/accounts/details/{{ transaction.otheraccount_address.0 }}" class="btn btn-default btn-xs">{{ transaction.currency_symbol }} <strong>{{ transaction.otheraccount }}</strong></a></td>
            {% endif %}
            
            <td>{% if transaction.comment %}{{ transaction.comment }}{% else %}-{% endif %}</td>    
            <td>
            <div class="text-center">
            {% if transaction.category = 'receive' %}
            <span data-toggle="tooltip" title="{{ transaction.category }}" class="category-icon glyphicon glyphicon-circle-arrow-down"></span>
            {% elif transaction.category = 'send' %}
            <span data-toggle="tooltip" title="{{ transaction.category }}" class="category-icon glyphicon glyphicon-circle-arrow-up"></span>
            {% elif transaction.category = 'move' %}
            <span data-toggle="tooltip" title="{{ transaction.category }}" class="category-icon glyphicon glyphicon-circle-arrow-right"></span>
            {% endif %}
            </div>
            <div class="visible-xs text-center"><span class="glyphicon {{ transaction.icon }}"></span></div>
            </td>
            <td class="hidden-xs text-center"><span style="color: {{ transaction.status_color }};" class="bigger-icon glyphicon {{ transaction.status_icon }}" title="{{ transaction.tooltip }}" data-toggle="tooltip"></span></td>
            <td>{{ transaction.time_pretty }}</td>
            <td class="text-right" style="font-family: courier;"><strong>{{ transaction.amount }}</strong> {{ transaction.currency|upper }}</td>
        </tr>
        {% endfor %}
        {% else %}
        <tr>
            <td colspan=7><center><em>No data</em></center></td>
        </tr>
        {% endif %}
    </table>
  
  
  
  

  </div>

  
</div>
{% endblock %}
