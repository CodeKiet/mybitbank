{% extends "dashboard/base.html" %}

{% block page_title %}{{ page_title }}{% endblock %}

{% block site_brand %}{{ globals.site_brand }}{% endblock %}

{% block content %}
        <div class="panel panel-default">
            <div class="panel-heading">
                
                <div class="row">
                  <div class="col-xs-6"><h3 class="panel-title">Account status</h3></div>
                  <div class="col-xs-6 text-right"><button type="button" onclick="showHideAllAccounts('hidden_account')" class="btn btn-primary btn-xs text-right">show/hide all accounts</button></div>
                </div>
            </div>
            <div class="panel-body">
                <table
                    class="table table-hover table-striped no-margin-bottom">
                    <tr>
                        <th style="background-color:#f5f5f5;">Name</th>
                        <th style="background-color:#f5f5f5;">Addresses</th>
                        <th style="background-color:#f5f5f5;">Last activity</th>
                        <th style="background-color:#f5f5f5;" class="text-right">Balance</th>
                    </tr>
                    {% if accounts %}
                    {% for account in accounts %}
                    
                    <tr {% if account.name == "" %}class="no-display" name="hidden_account"{% endif %}>
                        <td>{{ account.name }}</td>
                        <td style="font-family: courier;">{{ account.address.0 }}{% if account.address.1 %} (+1){% endif %}</td>
                        <td>{{ account.last_activity }}</td>
                        <td class="text-right" style="font-family: courier;"><strong>{{ account.balance }}</strong> {{ account.currency|upper }}</td>
                    </tr>
                    {% endfor %}
                    {% else %}
                    <tr>
                        <td colspan=4><center><em>No data</em></center></td>
                    </tr>
                    {% endif %}
                </table>
            </div>
        </div>

        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Last transactions</h3>
            </div>
            <div class="panel-body">
                <table
                    class="table table-hover table-striped no-margin-bottom">
                    <tr>
                        <th style="background-color:#f5f5f5;">Account</th>
                        <th style="background-color:#f5f5f5;">Type</th>
                        <th style="background-color:#f5f5f5;">Confirmations</th>
                        <th style="background-color:#f5f5f5;">When</th>
                        <th style="background-color:#f5f5f5;" class="text-right">Amount</th>
                    </tr>
                    {% if accounts %}
                    {% for transaction in transactions %} 
                    {% if transaction.confirmations > 10 %}
                      <tr>
                    {% else %}
                      <tr style="color: #bbb;">
                    {% endif %}
                        <td>{{ transaction.account }}</td>
                        <td><span class="glyphicon {{ transaction.icon }}"></span> {{ transaction.category }}</td>
                        <td>{{ transaction.confirmations }}</td>
                        <td>{{ transaction.timereceived_pretty }}</td>
                        <td class="text-right"
                            style="font-family: courier;"><strong>{{ transaction.amount }}</strong> {{ transaction.currency|upper }}</td>
                    </tr>
                    {% endfor %}
                    {% else %}
                    <tr>
                        <td colspan=5><center><em>No data</em></center></td>
                    </tr>
                    {% endif %}
                </table>
            </div>
        </div>
{% endblock %}
